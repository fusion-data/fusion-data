# 双许可

采用双许可证策略（Dual Licensing）时，你的 Rust 项目既可以在开源社区发展，又能通过商业授权实现收入。下面是一个完整的示例配置，包括目录结构、许可证文件、`Cargo.toml` 设置以及 Git 仓库建议。

---

## ✅ 目标

- **开源许可证**：AGPL-3.0
- **商业许可证**：自定义商业授权（例如，允许闭源使用）
- **技术栈**：Rust + Git
- **策略**：开源使用 AGPL，商业用户通过付费获取闭源授权

---

## 📁 项目目录结构

```
your_project/
├── Cargo.toml
├── LICENSE-AGPL.txt
├── LICENSE-COMMERCIAL.txt
├── README.md
├── src/
│   └── lib.rs
└── LICENSE → LICENSE-AGPL.txt
```

---

## 📦 `Cargo.toml` 示例配置

```toml
[package]
name = "your_project"
version = "0.1.0"
edition = "2021"
authors = ["Your Name <your@email.com>"]
license = "AGPL-3.0-only"
repository = "https://github.com/yourname/your_project"
description = "A dual-licensed Rust library"
homepage = "https://guixuflow.com/your_project"
readme = "README.md"
```

---

## 📄 LICENSE-AGPL.txt（开源许可证）

使用 GNU AGPL v3.0 官方文本：[https://www.gnu.org/licenses/agpl-3.0.txt](https://www.gnu.org/licenses/agpl-3.0.txt)

---

## 📄 LICENSE-COMMERCIAL.txt（商业许可证）

举例内容（可根据你业务需要定制）：

```text
Commercial License

Copyright (c) 2025 Your Company.

This software is licensed under a commercial license for proprietary use.
By purchasing a license from Your Company, you are granted the right to use,
modify, and distribute this software in closed-source applications.

For details or to purchase a commercial license, visit:
https://guixuflow.com/pricing or contact sales@guixuflow.com

This license does not apply to AGPL-3.0 users.
```

---

## 📄 README.md 中添加说明

```markdown
# YourProject

YourProject is a dual-licensed Rust library.

## License

- Open Source: [GNU AGPL v3.0](./LICENSE-AGPL.txt)
- Commercial: Available for proprietary use.

If you want to use YourProject in a closed-source or commercial product,
you must purchase a [commercial license](https://guixuflow.com/pricing).

Contact: [sales@guixuflow.com](mailto:sales@guixuflow.com)
```

---

## ✅ Git 使用建议

1. **公开 GitHub 仓库**：仅包含 AGPL 版本。
2. **私有仓库或镜像**：用于商业版本分发（包含许可证检测机制或高级功能）。
3. **Tag 商业客户版本**：通过 Git tag 管理不同商业交付版本（如 `v1.0-commercial`）。
4. **许可证提示代码（可选）**：在软件中嵌入提醒信息（如下）：

```rust
#[cfg(not(feature = "commercial_license"))]
fn show_license_warning() {
    eprintln!("This version is licensed under AGPL-3.0. For commercial use, please contact sales@guixuflow.com.");
}
```

---

## ✅ 商业版功能差异建议

可将高级功能放入 feature 中：

```toml
[features]
default = ["basic"]
basic = []
pro = []
```

然后用商业版构建 `--features pro`，并不在 AGPL 版本中启用该功能。

---

如你希望，我可以提供一份完整的 Rust 示例项目模板（带双许可证结构），是否需要？
